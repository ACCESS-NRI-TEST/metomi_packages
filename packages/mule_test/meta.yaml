{% set name = "mule" %}
{% set version = '1.0' %}
{% set revision = '126922' %}

package:
  name: "{{ name|lower }}"
  version: "{{ version }}"

source:
  svn_url: https://code.metoffice.gov.uk/svn/um/mule/trunk
  svn_rev: {{ revision }}
  svn_username: {{ environ["SVN_USERNAME"] }}
  svn_password: {{ environ["SVN_PASSWORD"] }}

build:
  number: 0 # [linux-64]
  number: 1 # [not linux-64]

requirements:
  build:
    - {{ compiler('c') }} # [linux-64]
  host:
    - python
    - pip
    - numpy
    - shumlib # [linux-64]
    - setuptools

outputs:
  - name: um-spiral-search
    files:
      - lib/python{{ python }}/site-packages/um_spiral_search
      - lib/python{{ python }}/site-packages/um_spiral_search-{{ python }}.dist-info
    build:
      skip: true # [not linux-64]
    requirements:
      run:
        - python
        - numpy
        - shumlib
    test:
      imports:
        - um_spiral_search
      commands:
        - $PYTHON -m unittest discover -vs ${SRC_DIR}/um_spiral_search/lib/um_spiral_search/tests

about:
  home: https://github.com/metomi/mule
  license: BSD
  license_family: BSD
  summary: Mule is a Python API for accessing the various file types used by the UM; the UK Met Office's Unified Model.